(self.webpackChunkfastdish=self.webpackChunkfastdish||[]).push([[131],{4131:function(e,a,t){"use strict";t.r(a);var n=t(4942),s=t(5861),r=t(9439),i=t(7757),l=t.n(i),u=t(2791),c=t(7892),o=t.n(c),d=t(3027),h=t.n(d),p=t(2813),m=t(7323),_=t(3086),f=t(7496),g=t(3695),Z=t(9389),v=t(6106),x=t(914),j=t(8243),b=t(7309),M=t(7834),P=t(3110),C=t(4492),N=t(8742),$=t(9594),w=t(8730),y=t(3178),T=t(1694),S=t.n(T),D=t(7790),I=t(184);o().extend(h());var k=p.Z.Title,U=m.Z.Option,O=_.Z.Dragger;a.default=function(){var e,a=(0,M.a)().userAuth,t=(0,u.useState)(null),i=(0,r.Z)(t,2),c=i[0],o=i[1],d=f.Z.useForm(),h=(0,r.Z)(d,1)[0],p=(0,C.xV)(),_=(0,r.Z)(p,2),T=_[0],L=_[1].isLoading,q=(0,P.Z)(),Y=q.uploadImage,z=q.uploadedImage,F=q.percentLoading,H=q.isUploadLoading,A=function(){var e=(0,s.Z)(l().mark((function e(a){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.y)(a);case 2:t=e.sent,o(t),Y(a);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),E=function(){var e=(0,s.Z)(l().mark((function e(t){var n,s,r,i,u,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.recipeName,s=t.meal,r=t.date,i=t.servings,u=t.time,c=60*u.hour+u.min,g.ZP.loading("Adding to your meal plan"),e.next=5,T({username:a.spoonacularUsername,hash:a.hash,title:n,slot:s,date:r.utc(!0).unix(),image:z,readyInMinutes:c,servings:i}).unwrap();case 5:o(null),h.resetFields(),g.ZP.success("The recipe has been successfully added to your meal plan");case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,I.jsxs)("div",{className:D.Z.createMealPlan__wrapper,children:[(0,I.jsx)(k,{className:D.Z.createMealPlan__title,level:1,children:"Your new recipe:"}),(0,I.jsxs)(f.Z,{className:D.Z.createMealPlan__form,layout:"vertical",onFinish:E,form:h,scrollToFirstError:{behavior:"smooth",scrollMode:"always",block:"center",inline:"center"},initialValues:{servings:1,time:{hour:0,min:0}},children:[(0,I.jsx)(f.Z.Item,{name:"recipeName",rules:[{required:!0,validateTrigger:"onSubmit",message:"Please enter a recipe name"},{required:!0,message:"Symbols should not be in the name",pattern:/^[A-Za-z0-9/\s]*$/},{required:!0,message:"The name cannot be empty",whitespace:!0}],wrapperCol:{span:24},children:(0,I.jsx)(Z.Z,{className:S()(D.Z.createMealPlan__input,D.Z.input),placeholder:"Recipe name",autoComplete:"off"})}),(0,I.jsxs)(v.Z,{align:"middle",justify:"space-between",gutter:16,children:[(0,I.jsx)(x.Z,{xs:24,lg:12,children:(0,I.jsx)(f.Z.Item,{name:"time",label:(0,I.jsx)("span",{className:D.Z.label,children:"Time for preparing"}),rules:[{required:!0,validateTrigger:"onSubmit",validator:function(){var e=(0,s.Z)(l().mark((function e(a,t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.hour||0!==t.min){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("Specify the correct time")));case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()}],children:(0,I.jsx)(w.Z,{})})}),(0,I.jsx)(x.Z,{xs:24,lg:12,children:(0,I.jsx)(f.Z.Item,{name:"servings",label:(0,I.jsx)("span",{className:D.Z.label,children:"Servings"}),rules:[{required:!0,message:"Please specify how many servings"}],children:(0,I.jsx)(j.Z,{className:D.Z.input,type:"number",size:"large",min:1,max:10})})})]}),(0,I.jsx)(v.Z,{className:D.Z.upload_container,children:(0,I.jsx)(x.Z,{span:24,children:(0,I.jsx)(f.Z.Item,{name:"photo",valuePropName:"filelist",label:(0,I.jsx)("span",{className:D.Z.label,children:"Photo of the finished dish"}),rules:[{required:!0,message:"Please select a photo"}],children:(0,I.jsx)(O,{name:"file",className:S()(D.Z.upload,(e={},(0,n.Z)(e,D.Z.upload__after,c),(0,n.Z)(e,D.Z.upload__loading,H),e)),beforeUpload:function(){return!1},showUploadList:!1,accept:".png,.jpeg,.jpg",onChange:function(e){return A(e.file)},disabled:H||L,children:(0,I.jsx)(N.Z,{isUploadLoading:H,uploadedImage:c,percentLoading:F})})})})}),(0,I.jsxs)(v.Z,{align:"middle",justify:"space-between",gutter:16,children:[(0,I.jsx)(x.Z,{xs:24,md:12,children:(0,I.jsx)(f.Z.Item,{name:"meal",label:(0,I.jsx)("span",{className:D.Z.label,children:"Meal"}),rules:[{required:!0,message:"Please select meal"}],children:(0,I.jsxs)(m.Z,{size:"large",placeholder:"Select a meal",className:D.Z.input,children:[(0,I.jsx)(U,{value:"1",children:"Breakfast"}),(0,I.jsx)(U,{value:"2",children:"Lunch"}),(0,I.jsx)(U,{value:"3",children:"Dinner"})]})})}),(0,I.jsx)(x.Z,{xs:24,md:12,children:(0,I.jsx)(f.Z.Item,{name:"date",label:(0,I.jsx)("span",{className:D.Z.label,children:"Choose a date"}),rules:[{type:"object",required:!0,message:"Please select date"}],children:(0,I.jsx)($.Z,{size:"large",className:S()(D.Z.datePicker,D.Z.input)})})})]}),(0,I.jsx)(v.Z,{justify:"center",children:(0,I.jsx)(f.Z.Item,{children:(0,I.jsx)(b.Z,{type:"primary",htmlType:"submit",disabled:L||H,size:"large",className:D.Z.submit_btn,children:"Save"})})})]})]})}},8742:function(e,a,t){"use strict";var n=t(4942),s=t(1992),r=t(8817),i=t(2351),l=t(1694),u=t.n(l),c=t(7790),o=t(184);a.Z=function(e){var a=e.uploadedImage,t=e.isUploadLoading,l=e.percentLoading;return a?(0,o.jsxs)("div",{className:c.Z.preview,children:[(0,o.jsx)(s.Z,{className:u()(c.Z.preview__image,(0,n.Z)({},c.Z.image__blur,!t)),preview:!1,src:a}),t&&(0,o.jsx)("div",{className:c.Z.preview__progress,children:(0,o.jsx)(r.Z,{type:"circle",percent:l,strokeColor:"#e27d60"})}),!t&&(0,o.jsxs)("div",{className:c.Z.preview__body,children:[(0,o.jsx)("p",{className:c.Z.text,children:(0,o.jsx)(i.Z,{className:c.Z.icon_upload})}),(0,o.jsx)("p",{className:c.Z.text,children:"Add photo (upload)"}),(0,o.jsx)("p",{className:c.Z.text,children:"Drag photos here or click on the icon"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"ant-upload-text",children:(0,o.jsx)(i.Z,{})}),(0,o.jsx)("p",{className:"ant-upload-text",children:"Add photo (upload)"}),(0,o.jsx)("p",{className:"ant-upload-hint",children:"Drag photos here or click on the icon"})]})}},8730:function(e,a,t){"use strict";t.d(a,{Z:function(){return d}});var n=t(1413),s=t(9439),r=t(2791),i=t(3099),l=t(9389),u="TimeInput_input_time__0Od-C",c="TimeInput_input_span__ireST",o=t(184),d=function(e){var a=e.value,t=void 0===a?{}:a,d=e.onChange,h=(0,r.useState)(0),p=(0,s.Z)(h,2),m=p[0],_=p[1],f=(0,r.useState)(0),g=(0,s.Z)(f,2),Z=g[0],v=g[1],x=function(e){null===d||void 0===d||d((0,n.Z)((0,n.Z)({hour:m,min:Z},t),e))};return(0,o.jsxs)(i.Z,{align:"baseline",children:[(0,o.jsx)(l.Z,{size:"large",type:"number",min:0,max:10,value:t.hour||m,onChange:function(e){var a=parseInt(e.target.value||"0",10);Number.isNaN(m)||("hour"in t||_(a),x(a>10?{hour:10}:{hour:a}))},className:u}),(0,o.jsx)("span",{className:c,children:"hour"}),(0,o.jsx)(l.Z,{size:"large",type:"number",min:0,max:59,value:t.min||Z,onChange:function(e){var a=parseInt(e.target.value||"0",10);Number.isNaN(Z)||("min"in t||v(a),x(a>59?{min:59}:{min:a}))},className:u}),(0,o.jsx)("span",{className:c,children:"min"})]})}},3027:function(e){e.exports=function(){"use strict";var e="minute",a=/[+-]\d\d(?::?\d\d)?/g,t=/([+-]|\d\d)/g;return function(n,s,r){var i=s.prototype;r.utc=function(e){return new s({date:e,utc:!0,args:arguments})},i.utc=function(a){var t=r(this.toDate(),{locale:this.$L,utc:!0});return a?t.add(this.utcOffset(),e):t},i.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var l=i.parse;i.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),l.call(this,e)};var u=i.init;i.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(n,s){var r=this.$utils().u;if(r(n))return this.$u?0:r(this.$offset)?c.call(this):this.$offset;if("string"==typeof n&&(n=function(e){void 0===e&&(e="");var n=e.match(a);if(!n)return null;var s=(""+n[0]).match(t)||["-",0,0],r=s[0],i=60*+s[1]+ +s[2];return 0===i?0:"+"===r?i:-i}(n),null===n))return this;var i=Math.abs(n)<=16?60*n:n,l=this;if(s)return l.$offset=i,l.$u=0===n,l;if(0!==n){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(l=this.local().add(i+u,e)).$offset=i,l.$x.$localOffset=u}else l=this.utc();return l};var o=i.format;i.format=function(e){var a=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return o.call(this,a)},i.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var d=i.toDate;i.toDate=function(e){return"s"===e&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var h=i.diff;i.diff=function(e,a,t){if(e&&this.$u===e.$u)return h.call(this,e,a,t);var n=this.local(),s=r(e).local();return h.call(n,s,a,t)}}}()},7790:function(e,a){"use strict";a.Z={createMealPlan__wrapper:"CreateMealPlan_createMealPlan__wrapper__aQB5M",createMealPlan__title:"CreateMealPlan_createMealPlan__title__8V86X",createMealPlan__input:"CreateMealPlan_createMealPlan__input__ludkT",createMealPlan__form:"CreateMealPlan_createMealPlan__form__nt0ok",input:"CreateMealPlan_input__suwq6",label:"CreateMealPlan_label__tkhjo",input_span:"CreateMealPlan_input_span__Nq-sZ",upload_container:"CreateMealPlan_upload_container__mi-R2",upload:"CreateMealPlan_upload__lZUjH",preview__body:"CreateMealPlan_preview__body__qOrrv",image__blur:"CreateMealPlan_image__blur__FX3sV",icon_close:"CreateMealPlan_icon_close__9LF5S",upload__loading:"CreateMealPlan_upload__loading__F9NhN",upload__after:"CreateMealPlan_upload__after__IvDel",submit_btn:"CreateMealPlan_submit_btn__esn8t",preview:"CreateMealPlan_preview__YL7MB",preview__image:"CreateMealPlan_preview__image__icQCJ",preview__progress:"CreateMealPlan_preview__progress__zc3wP",text:"CreateMealPlan_text__5JIOQ",icon_upload:"CreateMealPlan_icon_upload__EE7Sw"}}}]);
//# sourceMappingURL=131.245466ca.chunk.js.map