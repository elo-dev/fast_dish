{"version":3,"file":"static/js/236.50b5f4f4.chunk.js","mappings":"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","sources":["../node_modules/@ant-design/icons-svg/es/asn/HeartOutlined.js","../node_modules/@ant-design/icons/es/icons/HeartOutlined.js","webpack://fastdish/./src/Pages/VisualizeCard/VisualizeCard.module.scss?f8c1","Pages/VisualizeCard/VisualizeCard.jsx"],"sourcesContent":["// This icon file is generated automatically.\nvar HeartOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z\" } }] }, \"name\": \"heart\", \"theme\": \"outlined\" };\nexport default HeartOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport HeartOutlinedSvg from \"@ant-design/icons-svg/es/asn/HeartOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar HeartOutlined = function HeartOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: HeartOutlinedSvg\n  }));\n};\n\nHeartOutlined.displayName = 'HeartOutlined';\nexport default /*#__PURE__*/React.forwardRef(HeartOutlined);","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"VisualizeCard_header__lFe40\",\"card\":\"VisualizeCard_card__X1YKd\",\"card__title\":\"VisualizeCard_card__title__KyIfg\",\"card__img\":\"VisualizeCard_card__img__d2qtF\",\"card__avatar\":\"VisualizeCard_card__avatar__60G2-\",\"card__footer\":\"VisualizeCard_card__footer__kbeF1\",\"card__likes\":\"VisualizeCard_card__likes__07+ZA\",\"title\":\"VisualizeCard_title__EpEx9\",\"icon\":\"VisualizeCard_icon__Rwtcb\",\"iconLike\":\"VisualizeCard_iconLike__4jTbL\",\"likesCounter\":\"VisualizeCard_likesCounter__SzCwi\",\"link__create\":\"VisualizeCard_link__create__duHxk\"};","import { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport {\n  arrayRemove,\n  arrayUnion,\n  collection,\n  deleteDoc,\n  doc,\n  onSnapshot,\n  runTransaction,\n} from 'firebase/firestore'\n\nimport { Avatar, Card, Col, Empty, Image, Row, Space, Typography } from 'antd'\nimport { DeleteOutlined, HeartOutlined } from '@ant-design/icons'\n\nimport { firestoreDb } from '../../firebase'\n\nimport { useAuth } from '../../hooks/useAuth'\nimport useMediaMatch from '../../hooks/useMediaQuery'\n\nimport RequiredAuthModal from '../../components/RequiredAuthModal/RequiredAuthModal'\nimport Loading from '../../components/Loading/Loading'\n\nimport cn from 'classnames'\n\nimport style from './VisualizeCard.module.scss'\n\nconst { Title } = Typography\n\nconst VisualizeCard = () => {\n  const [cards, setCards] = useState([])\n  const [isModalSignUp, setIsModalSignUp] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n  const { userAuth } = useAuth()\n\n  const isSmallMediaMatch = useMediaMatch('(max-width: 992px)')\n\n  useEffect(() => {\n    const unsub = onSnapshot(collection(firestoreDb, 'posts'), (snapshot) => {\n      const posts = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }))\n      setCards(posts)\n      setIsLoading(false)\n    })\n\n    return () => unsub()\n  }, [])\n\n  const handleDeleteCard = async (postId) => {\n    const postDoc = doc(firestoreDb, 'posts', postId)\n\n    await deleteDoc(postDoc)\n  }\n\n  const handleLike = async (postId) => {\n    if (userAuth) {\n      const postsRef = doc(firestoreDb, 'posts', postId)\n      await runTransaction(firestoreDb, async (transaction) => {\n        const sfDoc = await transaction.get(postsRef)\n\n        if (!sfDoc.exists()) {\n          throw 'Document does not exist!'\n        }\n\n        if (!sfDoc.data().liked.length) {\n          const like = sfDoc.data().likes + 1\n\n          transaction.update(postsRef, {\n            liked: arrayUnion(userAuth.uid),\n            likes: like,\n          })\n        }\n\n        sfDoc.data().liked.filter((user) => {\n          if (user !== userAuth.uid) {\n            const like = sfDoc.data().likes + 1\n\n            transaction.update(postsRef, {\n              liked: arrayUnion(userAuth.uid),\n              likes: like,\n            })\n          } else {\n            const like = sfDoc.data().likes - 1\n\n            transaction.update(postsRef, {\n              liked: arrayRemove(userAuth.uid),\n              likes: like,\n            })\n          }\n        })\n      })\n    } else {\n      setIsModalSignUp(true)\n    }\n  }\n\n  if (isLoading) return <Loading />\n\n  return (\n    <>\n      <header className={style.header}>\n        <Title className={style.title} level={1}>\n          Visualize\n        </Title>\n        {isSmallMediaMatch && (\n          <Link className={style.link__create} to=\"/visualize/create\">\n            Create a visualization\n          </Link>\n        )}\n      </header>\n      {!cards.length && <Empty description=\"No visualized cards\" />}\n      <Row gutter={[16, 16]}>\n        {cards?.map((item) => (\n          <Col xs={24} sm={12} lg={8} xxl={6} key={item.id}>\n            <Card\n              className={style.card}\n              cover={\n                <Image\n                  alt={item.title}\n                  src={item.url}\n                  className={style.card__img}\n                />\n              }\n            >\n              <Space size=\"middle\">\n                <Avatar\n                  src={item.author.avatar}\n                  className={style.card__avatar}\n                />\n                <div>\n                  <Title level={2} className={style.card__title}>\n                    {item.title}\n                  </Title>\n                  <p>{item.author.name}</p>\n                </div>\n              </Space>\n\n              <div className={style.card__footer}>\n                {userAuth?.uid === item.author.id && (\n                  <DeleteOutlined\n                    className={style.icon}\n                    onClick={() => handleDeleteCard(item.id)}\n                  />\n                )}\n                <div className={style.card__likes}>\n                  <HeartOutlined\n                    className={cn(style.icon, style.iconLike)}\n                    onClick={() => handleLike(item.id)}\n                  />\n                  <span className={style.likesCounter}>{item.likes}</span>\n                </div>\n              </div>\n            </Card>\n          </Col>\n        ))}\n      </Row>\n      <RequiredAuthModal\n        isModalSignUp={isModalSignUp}\n        setIsModalSignUp={setIsModalSignUp}\n        text=\"After logging in, you will be able to mark your favorite posts\"\n        title=\"Mark your favorites in your account\"\n      />\n    </>\n  )\n}\n\nexport default VisualizeCard\n"],"names":["HeartOutlined","props","ref","React","AntdIcon","_objectSpread","icon","HeartOutlinedSvg","displayName","Title","Typography","useState","cards","setCards","isModalSignUp","setIsModalSignUp","isLoading","setIsLoading","userAuth","useAuth","isSmallMediaMatch","useMediaMatch","useEffect","unsub","onSnapshot","collection","firestoreDb","snapshot","posts","docs","map","doc","id","data","handleDeleteCard","postId","postDoc","deleteDoc","handleLike","postsRef","runTransaction","transaction","get","sfDoc","exists","liked","length","like","likes","update","arrayUnion","uid","filter","user","arrayRemove","Loading","className","style","level","to","description","gutter","item","xs","sm","lg","xxl","cover","alt","title","src","url","size","author","avatar","name","DeleteOutlined","onClick","cn","RequiredAuthModal","text"],"sourceRoot":""}